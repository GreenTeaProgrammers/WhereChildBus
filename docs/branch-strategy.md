# ブランチ戦略ガイド

このガイドでは、効率的で整理された開発フローを促進し、コードベースの安定性を保持するためにチームが従うべきブランチ戦略を定義します。

## メインブランチ

- **main**: 本番環境にデプロイ可能な状態を常に保ちます。変更はプルリクエストを通じてのみマージされます。

## 開発ブランチ

- **develop**: 新機能、バグ修正、リファクタリングなどの開発作業用の主要ブランチです。`main`から分岐し、開発が完了した機能はこのブランチにマージされます。

## 機能ブランチ (`feature/(scope)/(feature-name)`)

機能ブランチは、新しい機能の開発や既存機能の大幅な改善を行うために使用されます。これらのブランチは、特定の機能や目的に集中することで、開発プロセスをより管理しやすくすることを目的としています。

#### 命名規則

機能ブランチの名前は、`feature/`の接頭辞で始まり、その後にスコープと機能名を含めます。

- **スコープ**: 機能の種類や関連する領域を示すために使用されます

- `feature/frontend`
- `feature/backend`
- `feature/machine-learning`

- **機能名**: ブランチが実装する機能の名前を含めます

- `feature/backend/user-authentication`
- `feature/frontend/payment-integration`
- `feature/machine-learning/image-recognition`

#### 開発フロー

1. **分岐**: 新しい機能の開発を開始する際には、常に最新の`develop`ブランチから`feature/`ブランチを分岐させます。
2. **開発**: 機能ブランチ内で必要な全ての開発作業を行います。これには、コーディング、単体テストの作成、ドキュメントの更新などが含まれます。
3. **定期的な更新**: 開発中に`develop`ブランチが更新された場合は、変更を機能ブランチに取り込むために定期的にリベースするかマージします。これにより、最終的なマージプロセスを容易にし、衝突の可能性を減らします。
4. **コードレビュー**: 機能が完成し、テストをパスしたら、プルリクエストを作成して`develop`ブランチにマージする前にチームメンバーのコードレビューを受けます。
5. **マージ**: レビューが完了し、プルリクエストが承認されたら、機能ブランチを`develop`にマージします。マージ後、ブランチはクローズされ、必要に応じて削除されます。

#### ベストプラクティス

- **小さな単位でのコミット**: 機能ブランチ内の作業を小さな単位に分割し、各変更に対して明確なコミットメッセージを使用してコミットします。
- **機能の単一性**: 一つの機能ブランチは一つの主要な機能に焦点を当てるべきです。複数の機能を同時に開発する場合は、それぞれに対して別々のブランチを使用します。
- **透明性の維持**: プルリクエストやブランチの説明には、変更の目的や機能の概要、テストケース、特に注意が必要な点など、十分な情報を含めて他のチームメンバーとの透明性を確保します。

機能ブランチ戦略を適切に使用することで、チームはより効率的に機能を開発し、プロジェクトの全体的な品質とコラボレーションを向上させることができます。

## タイプ別ブランチ

### CI ブランチ (`ci/`)

- **目的**: CI (Continuous Integration) 設定ファイルやスクリプトへの変更。
- **命名規則**: `ci/update-pipeline`, `ci/add-linting`
- **マージ先**: `develop`

### ドキュメントブランチ (`docs/`)

- **目的**: ドキュメントの作成や更新。
- **命名規則**: `docs/update-readme`, `docs/add-contributing-guide`
- **マージ先**: `develop`

### バグ修正ブランチ (`fix/`)

- **目的**: バグの修正。
- **命名規則**: `fix/login-error`, `fix/memory-leak`
- **マージ先**: `develop`

### リファクタリングブランチ (`refactor/`)

- **目的**: コードの構造を改善するが、外部に見える挙動には影響を与えない。
- **命名規則**: `refactor/cleanup-service`, `refactor/optimize-function`
- **マージ先**: `develop`

### スタイル調整ブランチ (`style/`)

- **目的**: コードフォーマットやコーディング規約の遵守。
- **命名規則**: `style/fix-indentation`, `style/apply-lint-rules`
- **マージ先**: `develop`

### テストブランチ (`test/`)

- **目的**: 新しいテストの追加や既存テストの修正。
- **命名規則**: `test/add-login-tests`, `test/fix-cart-tests`
- **マージ先**: `develop`

## マージ戦略

- 全てのマージはプルリクエストを通じて行われ、コードレビューが必要です。
- スクワッシュマージを使用して履歴を整理することが推奨されます。
- 必要に応じて、`develop`や`main`からのリベースを使用してブランチを最新の状態に保ちます。

## ブランチの維持

- マージが完了したブランチは、その作業が`develop`または`main`に統合された後に削除することが推奨されます。
- 定期的にブランチをレビューし、もはや使用されていない古いブランチをクリーンアップします。
